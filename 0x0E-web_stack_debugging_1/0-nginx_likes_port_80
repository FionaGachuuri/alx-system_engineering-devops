#!/usr/bin/env bash
# Ensure the script runs with root privileges
if [ "$(id -u)" -ne 0 ]; then
    echo "This script must be run as root." >&2
    exit 1
fi

# Update packages and install Nginx if not installed
apt update -y
apt install -y nginx

# Configure Nginx to listen on port 80
if ! grep -q "listen 80;" /etc/nginx/sites-enabled/default; then
    sed -i 's/listen 80 default_server;/listen 80;/g' /etc/nginx/sites-enabled/default
fi

# Allow traffic on port 80 through the firewall
ufw allow 80/tcp || true

# Restart Nginx
systemctl restart nginx
